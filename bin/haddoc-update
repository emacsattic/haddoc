#!/usr/bin/env python

"""haddoc-update <html-doc>

Update the database of search terms to URLs.
"""

import sys, re
import haddoc

def main():
    import optparse
    parser = optparse.OptionParser(__doc__.strip())
    haddoc.add_options(parser)
    opts, args = parser.parse_args()

    if len(args) != 1:
        parser.error(
            "This program requires the location of the documentation indexes.")
    html_doc = args[0]
    
    if not re.match('[a-z][a-z]+://', html_doc):
        parser.error("The supplied location must be a URL, "
                     "i.e. http://... or file://...")

    haddoc.update(opts.haddoc_database, html_doc, sys.stdout)


if __name__ == '__main__':
    main()

